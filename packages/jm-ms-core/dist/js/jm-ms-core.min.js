!function i(u,o,a){function s(r,e){if(!o[r]){if(!u[r]){var t="function"==typeof require&&require;if(!e&&t)return t(r,!0);if(f)return f(r,!0);throw new Error("Cannot find module '"+r+"'")}var n=o[r]={exports:{}};u[r][0].call(n.exports,function(e){var t=u[r][1][e];return s(t||e)},n,n.exports,i,u,o,a)}return o[r].exports}for(var f="function"==typeof require&&require,e=0;e<a.length;e++)s(a[e]);return s}({1:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=900;r.default={FA_INVALID_TYPE:{err:n++,msg:"invalid type"}},t.exports=r.default},{}],2:[function(v,h,y){(function(e){"use strict";Object.defineProperty(y,"__esModule",{value:!0});var i=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),f=r(v("jm-err")),t=r(v("jm-event")),u=r(v("jm-module")),o=r(v("./utils")),l=r(v("./router")),a=r(v("./err"));function r(e){return e&&e.__esModule?e:{default:e}}function c(e){return function(){var a=e.apply(this,arguments);return new Promise(function(u,o){return function t(e,r){try{var n=a[e](r),i=n.value}catch(e){return void o(e)}if(!n.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});u(i)}("next")})}}var n=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),f.default.enableErr(this),u.default.enableModule(this),this.utils=o.default,this.clientModules={},this.serverModules={}}var t,r,n;return i(e,[{key:"router",value:function(){var n,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},a=this,s=new l.default(e);return s.proxy=(n=c(regeneratorRuntime.mark(function e(t,r,n){var i,u,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("string"==typeof(i=t)&&(i={uri:t,target:r,changeOrigin:n}),i||(i={}),i.target){e.next=7;break}throw u=f.default.Err.FA_PARAMS,f.default.err(u);case 7:return this.emit("proxy",i),"string"==typeof i.target&&(i.target={uri:i.target}),e.next=11,a.client(i.target);case 11:o=e.sent,i.changeOrigin?s.use(i.uri,o.request.bind(o)):s.use(i.uri,o);case 13:case"end":return e.stop()}},e,this)})),function(e,t,r){return n.apply(this,arguments)}),s}},{key:"client",value:(n=c(regeneratorRuntime.mark(function e(){var t,r,n,i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=null,r="http",i.uri&&(r=o.default.getUriProtocol(i.uri)),i.type&&(r=i.type),r=r.toLowerCase(),n=this.clientModules[r]){e.next=11;break}throw t=a.default.FA_INVALID_TYPE,f.default.err(t);case 11:return e.next=13,n(i);case 13:return(t=e.sent)&&o.default.enableType(t,["get","post","put","delete"]),e.abrupt("return",t);case 16:case"end":return e.stop()}},e,this)})),function(){return n.apply(this,arguments)})},{key:"server",value:(r=c(regeneratorRuntime.mark(function e(){var t,r,n,i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,u=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=null,r="http",u.uri&&(r=o.default.getUriProtocol(u.uri)),u.type&&(r=u.type),r=r.toLowerCase(),n=this.serverModules[r]){e.next=11;break}throw t=a.default.FA_INVALID_TYPE,f.default.err(t);case 11:return i.emit("server",u),e.next=14,n(i,u);case 14:return t=e.sent,e.abrupt("return",t);case 16:case"end":return e.stop()}},e,this)})),function(){return r.apply(this,arguments)})},{key:"proxy",value:(t=c(regeneratorRuntime.mark(function e(){var t,r,n,i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null,"string"==typeof i&&(i={uri:i}),i.uri){e.next=7;break}throw t=f.default.Err.FA_PARAMS,f.default.err(t);case 7:return r=this.router(),e.next=10,this.client(i);case 10:return n=e.sent,r.use(n.request.bind(n)),r.client=n,e.abrupt("return",r);case 14:case"end":return e.stop()}},e,this)})),function(){return t.apply(this,arguments)})}]),e}();if(void 0!==e&&e){e.jm||(e.jm={});var s=e.jm;if(!s.ms){var d=new n;s.ms=function(e){return d.router(e)};var p=s.ms;t.default.enableEvent(p),p.root=d,p.proxy=d.proxy.bind(d),p.client=d.client.bind(d),p.server=d.server.bind(d)}}y.default=n,h.exports=y.default}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./err":1,"./router":4,"./utils":5,"jm-err":6,"jm-event":9,"jm-module":10}],3:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n,i=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),u=e("path-to-regexp"),o=(n=u)&&n.__esModule?n:{default:n};var a=function(){function u(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),this.uri=e.uri||"/",this.type=e.type,this._fns=[],this.keys=[],e.router&&(this.router=e.router),this.regexp=(0,o.default)(this.uri,this.keys,e),"/"===this.uri&&!1===e.end&&(this.regexp.fast_slash=!0),void 0===this.type&&(this.allType=!0);var t=e.fn;Array.isArray(t)||(t=[t]);for(var r=0;r<t.length;r++){var n=t[r];if("function"!=typeof n){var i=toString.call(n);throw new TypeError("requires callback functions but got a "+i)}this._fns.push(n)}}var e,t;return i(u,[{key:"handle",value:(e=regeneratorRuntime.mark(function e(t){var r,n,i,u,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=this.fns,n=0,i=r.length;case 2:if(!(n<i)){e.next=12;break}return u=r[n],e.next=6,u(t);case 6:if(void 0===(o=e.sent)){e.next=9;break}return e.abrupt("return",o);case 9:n++,e.next=2;break;case 12:case"end":return e.stop()}},e,this)}),t=function(){var a=e.apply(this,arguments);return new Promise(function(u,o){return function t(e,r){try{var n=a[e](r),i=n.value}catch(e){return void o(e)}if(!n.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});u(i)}("next")})},function(e){return t.apply(this,arguments)})},{key:"match",value:function(e,t){if(this.params=void 0,this.uri=void 0,t&&(t=t.toLowerCase()),t!==this.type&&!this.allType)return!1;if(null==e)return!1;if(this.regexp.fast_slash)return this.params={},!(this.uri="");var r=this.regexp.exec(e);if(!r)return!1;this.params={},this.uri=r[0];for(var n=this.keys,i=this.params,u=1;u<r.length;u++){i[n[u-1].name]=r[u]}return!0}},{key:"fns",get:function(){return this._fns}}]),u}();r.default=a,t.exports=r.default},{"path-to-regexp":11}],4:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),o=i(e("./route")),a=i(e("./utils")),s=i(e("jm-err")),f=i(e("jm-event"));function i(e){return e&&e.__esModule?e:{default:e}}function l(e){return function(){var a=e.apply(this,arguments);return new Promise(function(u,o){return function t(e,r){try{var n=a[e](r),i=n.value}catch(e){return void o(e)}if(!n.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});u(i)}("next")})}}var c=s.default.Err,d=s.default.err(c.FA_NOTFOUND),p=Array.prototype.slice,v=function(){function i(){var t=this,r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this._routes=[],["mergeParams","sensitive","strict"].forEach(function(e){r[e]&&(t[e]=r[e])}),a.default.enableType(this,["get","post","put","delete"]),f.default.enableEvent(this)}var t,r;return n(i,[{key:"clear",value:function(){return this._routes=[],this}},{key:"_add",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=null;if(!e.uri||!e.fn)throw t=c.FA_PARAMS,s.default.err(t);this.emit("add",e);var r={};for(var n in e)r[n]=e[n];return void 0===r.mergeParams&&(r.mergeParams=this.mergeParams),void 0===r.sensitive&&(r.sensitive=this.sensitive),void 0===r.strict&&(r.strict=this.strict),this._routes.push(new o.default(r)),this}},{key:"add",value:function(e){return"string"==typeof e&&(e={uri:e},"string"==typeof arguments[1]?(e.type=arguments[1],Array.isArray(arguments[2])?e.fn=arguments[2]:e.fn=p.call(arguments,2)):Array.isArray(arguments[1])?e.fn=arguments[1]:e.fn=p.call(arguments,1)),this._add(e)}},{key:"_use",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=null;if(e&&e instanceof i&&(e={fn:e}),!e.fn)throw t=c.FA_PARAMS,s.default.err(t);if(this.emit("use",e),e.strict=!1,e.end=!1,e.uri=e.uri||"/",e.fn instanceof i){var r=e.fn;e.router=r,e.fn=r.handle.bind(r)}else if("object"===u(e.fn)){var n=e.fn;n.request?(e.router=n,e.fn=n.request.bind(n)):n.handle&&(e.router=n,e.fn=n.handle.bind(n))}return this._add(e)}},{key:"use",value:function(e){return"string"==typeof e?(e={uri:e},"object"===u(arguments[1])?e.fn=arguments[1]:e.fn=p.call(arguments,1)):"function"==typeof e?e={fn:p.call(arguments,0)}:Array.isArray(e)?e={fn:e}:"object"===(void 0===e?"undefined":u(e))&&(e.fn||(e={fn:e})),this._use(e)}},{key:"request",value:(r=l(regeneratorRuntime.mark(function e(t){var r,n=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return"object"!==(void 0===t?"undefined":u(t))&&(t=a.default.preRequest.apply(this,n)),e.next=3,this.handle(t);case 3:if(void 0!==(r=e.sent)){e.next=6;break}throw d;case 6:return e.abrupt("return",r);case 7:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)})},{key:"handle",value:(t=l(regeneratorRuntime.mark(function e(t){var r,n,i,u,o,a,s,f,l,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:c=function(e,t,r){return function(){e.uri=e.originalUri,e.baseUri=t,e.params=r}},r=this.routes,n=t.params,i=t.baseUri||"",u=c(t,t.baseUri,t.params),t.originalUri||(t.originalUri=t.uri),o=t.uri,a=0,s=r.length;case 9:if(!(a<s)){e.next=36;break}if(t.baseUri=i,t.uri=o,f=r[a]){e.next=15;break}return e.abrupt("continue",33);case 15:if(f.match(t.uri,t.type)){e.next=18;break}return e.abrupt("continue",33);case 18:return t.params=Object.assign({},n,f.params),f.router&&(t.baseUri=i+f.uri,t.uri=t.uri.replace(f.uri,"")),e.prev=20,e.next=23,f.handle(t);case 23:if(void 0===(l=e.sent)){e.next=27;break}return u(),e.abrupt("return",l);case 27:e.next=33;break;case 29:throw e.prev=29,e.t0=e.catch(20),u(),e.t0;case 33:a++,e.next=9;break;case 36:u();case 37:case"end":return e.stop()}},e,this,[[20,29]])})),function(e){return t.apply(this,arguments)})},{key:"routes",get:function(){return this._routes}}]),i}();r.default=v,t.exports=r.default},{"./route":3,"./utils":5,"jm-err":6,"jm-event":9}],5:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var n={getUriProtocol:function(e){return e?e.substring(0,e.indexOf(":")):null},getUriPath:function(e){var t=e.indexOf("//");return-1===t?"":-1===(t=e.indexOf("/",t+2))?"":(-1===(t=(e=e.substr(t)).indexOf("#"))&&(t=e.indexOf("?")),-1!==t&&(e=e.substr(0,t)),e)},enableType:function(u,e){var o=this;Array.isArray(e)||(e=[e]),e.forEach(function(i){var e;u[i]=(e=regeneratorRuntime.mark(function e(){var t,r,n=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(t=o.preRequest.apply(this,n)).type=i,e.next=4,u.request(t);case 4:return r=e.sent,e.abrupt("return",r);case 6:case"end":return e.stop()}},e,this)}),function(){var a=e.apply(this,arguments);return new Promise(function(u,o){return function t(e,r){try{var n=a[e](r),i=n.value}catch(e){return void o(e)}if(!n.done)return Promise.resolve(i).then(function(e){t("next",e)},function(e){t("throw",e)});u(i)}("next")})})})},preRequest:function e(t,r,n,i){if("object"===(void 0===t?"undefined":o(t)))return t;var u={uri:t};return void 0===r?u:r&&"object"===(void 0===r?"undefined":o(r))?e(t,null,r,n):("string"==typeof r&&(u.type=r),void 0===n||(n&&"object"===(void 0===n?"undefined":o(n))&&(u.data=n),void 0===i||i&&"object"===(void 0===i?"undefined":o(i))&&(u=Object.assign(u,i))),u)}};r.default=n,t.exports=r.default},{}],6:[function(c,d,p){(function(e){"use strict";Object.defineProperty(p,"__esModule",{value:!0});var t,r=c("./locale"),n=(t=r)&&t.__esModule?t:{default:t};var i={SUCCESS:{err:0,msg:"Success"},FAIL:{err:1,msg:"Fail"},FA_SYS:{err:2,msg:"System Error"},FA_NETWORK:{err:3,msg:"Network Error"},FA_PARAMS:{err:4,msg:"Parameter Error"},FA_BUSY:{err:5,msg:"Busy"},FA_TIMEOUT:{err:6,msg:"Time Out"},FA_ABORT:{err:7,msg:"Abort"},FA_NOTREADY:{err:8,msg:"Not Ready"},FA_NOTEXISTS:{err:9,msg:"Not Exists"},FA_EXISTS:{err:8,msg:"Already Exists"},OK:{err:200,msg:"OK"},FA_BADREQUEST:{err:400,msg:"Bad Request"},FA_NOAUTH:{err:401,msg:"Unauthorized"},FA_NOPERMISSION:{err:403,msg:"Forbidden"},FA_NOTFOUND:{err:404,msg:"Not Found"},FA_INTERNALERROR:{err:500,msg:"Internal Server Error"},FA_UNAVAILABLE:{err:503,msg:"Service Unavailable"}};i.t=n.default;var u=function(e,t){if(t)for(var r in t)e=e.split("${"+r+"}").join(t[r]);return e},o=function(e,t){"string"==typeof e&&(e={msg:e});var r=u(e.msg,t),n=new Error(r);return e.err&&(n.code=e.err),n},a=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"Err";return!e[t]&&(e[t]=i,e.err=o,e.errMsg=u,!0)},s={Err:i,errMsg:u,err:o,enableErr:a,disableErr:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"Err";e[t]&&(delete e[t],delete e.err,delete e.errMsg)}};if(void 0!==e&&e){e.jm||(e.jm={});var f=e.jm;if(!f.enableErr)for(var l in a(f),s)f[l]=s[l]}p.default=s,d.exports=p.default}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./locale":7}],7:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t){return t&&u[t]?u[t][e]:null};var n,i=e("./zh_CN");var u={zh_CN:((n=i)&&n.__esModule?n:{default:n}).default};t.exports=r.default},{"./zh_CN":8}],8:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={Success:"成功",Fail:"失败","System Error":"系统错误","Network Error":"网络错误","Parameter Error":"参数错误",Busy:"忙","Time Out":"超时",Abort:"中止","Not Ready":"未准备好","Not Exists":"不存在","Already Exists":"已存在",OK:"OK","Bad Request":"错误请求",Unauthorized:"未验证",Forbidden:"无权限","Not Found":"未找到","Internal Server Error":"服务器内部错误","Service Unavailable":"无效服务"},t.exports=r.default},{}],9:[function(e,l,c){(function(e){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var t=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}();var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._events={}}return t(e,[{key:"on",value:function(e,t,r){return this._events[e]||(this._events[e]=[]),r?this._events[e].unshift(t):this._events[e].push(t),this}},{key:"once",value:function(o,a,e){var s=this;return this.on(o,function e(t,r,n,i,u){s.off(o,e),a(t,r,n,i,u)},e)}},{key:"off",value:function(e,t){if(t){if(this._events&&this._events[e])for(var r=this._events[e],n=0;n<r.length;n++)if(t===r[n]){r.splice(n,1),r.length||delete this._events[e];break}}else void 0===e?this._events={}:this._events&&this._events[e]&&delete this._events[e];return this}},{key:"emit",value:function(e,t,r,n,i,u){for(var o=this.listeners(e),a=0;a<o.length;a++){if(!1===(0,o[a])(t,r,n,i,u))break}return this}},{key:"eventNames",value:function(){return Object.keys(this._events)}},{key:"listeners",value:function(e){var t=this._events[e];if(!t)return[];for(var r=new Array(t.length),n=0;n<t.length;n++)r[n]=t[n];return r}}]),e}(),n=r.prototype,i={_events:{},on:n.on,once:n.once,off:n.off,emit:n.emit,eventNames:n.eventNames,listeners:n.listeners},u=function(e){if(void 0!==e.emit)return!1;for(var t in i)e[t]=i[t];return e._events={},!0},o=function(e){if(void 0!==e.emit)for(var t in i)delete e[t]},a={EventEmitter:r,enableEvent:u,disableEvent:o,moduleEvent:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"event",t=this;return t.enableEvent=u,t.disableEvent=o,{name:e,unuse:function(){delete t.enableEvent,delete t.disableEvent}}}};if(void 0!==e&&e){e.jm||(e.jm={});var s=e.jm;if(!s.EventEmitter)for(var f in a)s[f]=a[f]}c.default=a,l.exports=c.default}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],10:[function(e,f,l){(function(e){"use strict";Object.defineProperty(l,"__esModule",{value:!0});var t=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}();var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._modules={}}return t(e,[{key:"use",value:function(e){for(var t=arguments.length,r=Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var i=e.apply(this,r);return i&&i.name&&(this._modules[i.name]=i),this}},{key:"unuse",value:function(e){var t=e;return"string"==typeof t&&(t=this._modules[t]),t&&t.unuse&&(t.name&&delete this._modules[t.name],t.unuse()),this}},{key:"modules",get:function(){return this._modules}}]),e}(),n=r.prototype,i={_modules:{},use:n.use,unuse:n.unuse},u=function(e){if(void 0!==e.use)return!1;for(var t in i)e[t]=i[t];return e._modules={},Object.defineProperty(e,"modules",{value:e._modules,writable:!1}),!0},o={Modulable:r,enableModule:u,disableModule:function(e){if(void 0!==e.use)for(var t in i)delete e[t]}};if(void 0!==e&&e){e.jm||(e.jm={});var a=e.jm;if(!a.enableModule){for(var s in o)a[s]=o[s];u(a)}}l.default=o,f.exports=l.default}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],11:[function(e,t,r){var d=e("isarray");t.exports=a,t.exports.parse=u,t.exports.compile=function(e,t){return n(u(e,t))},t.exports.tokensToFunction=n,t.exports.tokensToRegExp=o;var A=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function u(e,t){for(var r,n,i=[],u=0,o=0,a="",s=t&&t.delimiter||"/";null!=(r=A.exec(e));){var f=r[0],l=r[1],c=r.index;if(a+=e.slice(o,c),o=c+f.length,l)a+=l[1];else{var d=e[o],p=r[2],v=r[3],h=r[4],y=r[5],m=r[6],g=r[7];a&&(i.push(a),a="");var b=null!=p&&null!=d&&d!==p,x="+"===m||"*"===m,_="?"===m||"*"===m,w=r[2]||s,E=h||y;i.push({name:v||u++,prefix:p||"",delimiter:w,optional:_,repeat:x,partial:b,asterisk:!!g,pattern:E?(n=E,n.replace(/([=!:$\/()])/g,"\\$1")):g?".*":"[^"+k(w)+"]+?"})}}return o<e.length&&(a+=e.substr(o)),a&&i.push(a),i}function p(e){return encodeURI(e).replace(/[\/?#]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function n(l){for(var c=new Array(l.length),e=0;e<l.length;e++)"object"==typeof l[e]&&(c[e]=new RegExp("^(?:"+l[e].pattern+")$"));return function(e,t){for(var r="",n=e||{},i=(t||{}).pretty?p:encodeURIComponent,u=0;u<l.length;u++){var o=l[u];if("string"!=typeof o){var a,s=n[o.name];if(null==s){if(o.optional){o.partial&&(r+=o.prefix);continue}throw new TypeError('Expected "'+o.name+'" to be defined')}if(d(s)){if(!o.repeat)throw new TypeError('Expected "'+o.name+'" to not repeat, but received `'+JSON.stringify(s)+"`");if(0===s.length){if(o.optional)continue;throw new TypeError('Expected "'+o.name+'" to not be empty')}for(var f=0;f<s.length;f++){if(a=i(s[f]),!c[u].test(a))throw new TypeError('Expected all "'+o.name+'" to match "'+o.pattern+'", but received `'+JSON.stringify(a)+"`");r+=(0===f?o.prefix:o.delimiter)+a}}else{if(a=o.asterisk?encodeURI(s).replace(/[?#]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}):i(s),!c[u].test(a))throw new TypeError('Expected "'+o.name+'" to match "'+o.pattern+'", but received "'+a+'"');r+=o.prefix+a}}else r+=o}return r}}function k(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function v(e,t){return e.keys=t,e}function h(e){return e.sensitive?"":"i"}function o(e,t,r){d(t)||(r=t||r,t=[]);for(var n=(r=r||{}).strict,i=!1!==r.end,u="",o=0;o<e.length;o++){var a=e[o];if("string"==typeof a)u+=k(a);else{var s=k(a.prefix),f="(?:"+a.pattern+")";t.push(a),a.repeat&&(f+="(?:"+s+f+")*"),u+=f=a.optional?a.partial?s+"("+f+")?":"(?:"+s+"("+f+"))?":s+"("+f+")"}}var l=k(r.delimiter||"/"),c=u.slice(-l.length)===l;return n||(u=(c?u.slice(0,-l.length):u)+"(?:"+l+"(?=$))?"),u+=i?"$":n&&c?"":"(?="+l+"|$)",v(new RegExp("^"+u,h(r)),t)}function a(e,t,r){return d(t)||(r=t||r,t=[]),r=r||{},e instanceof RegExp?function(e,t){var r=e.source.match(/\((?!\?)/g);if(r)for(var n=0;n<r.length;n++)t.push({name:n,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return v(e,t)}(e,t):d(e)?function(e,t,r){for(var n=[],i=0;i<e.length;i++)n.push(a(e[i],t,r).source);return v(new RegExp("(?:"+n.join("|")+")",h(r)),t)}(e,t,r):(n=t,o(u(e,i=r),n,i));var n,i}},{isarray:12}],12:[function(e,t,r){t.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},{}]},{},[2]);